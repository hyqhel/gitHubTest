<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sample.hello.dao.SubjectMapper">  <!--这个和我们的dao接口类的名称相同-->
<resultMap id="BaseResultMap" type="sample.hello.bean.Subject" >
    <result column="subjectId" property="subjectId" jdbcType="VARCHAR" />
    <result column="subjectContent" property="subjectContent" jdbcType="VARCHAR" />
    <result column="subjectStatus" property="subjectStatus" jdbcType="VARCHAR" />
    <result column="startTime" property="startTime" jdbcType="VARCHAR" />
    <result column="endTime" property="endTime" jdbcType="VARCHAR" />
    <result column="maxSelect" property="type" jdbcType="VARCHAR" />
        <result column="maxSelect" property="maxSelect" jdbcType="VARCHAR" />
  </resultMap>
  
<!--    useGeneratedKeys="true" keyProperty="subjectId" -->
  <insert id="addSubject" parameterType="sample.hello.bean.Subject"  > 
INSERT INTO onlinesubject
	(subjectId,subjectContent, subjectStatus,startTime, endTime, type,maxSelect)
	VALUES
	(#{subjectId},#{subjectContent}, #{subjectStatus},  DATE_FORMAT(#{startTime},'%Y-%m-%d %H:%i:%s'), 
	DATE_FORMAT(#{endTime},'%Y-%m-%d %H:%i:%s'), #{type},#{maxSelect});
  </insert>
  
    <select id="getSubjectById" parameterType="java.lang.String" resultMap="BaseResultMap">
    select 
	  	`subjectId`, 
	`subjectContent`, 
	`subjectStatus`, 
	`startTime`, 
	`endTime`, 
	`type`, 
	`maxSelect` from onlinesubject 
	  where subjectId=#{subjectId};
  </select>
  
   <select id="getAllSubject" parameterType="java.lang.String" resultMap="BaseResultMap">
    select 
	  	`subjectId`, 
	`subjectContent`, 
	`subjectStatus`, 
	`startTime`, 
	`endTime`, 
	`type`, 
	`maxSelect` from onlinesubject  where startTime &lt;=now() and endTime>=now();
  </select>
  
</mapper>